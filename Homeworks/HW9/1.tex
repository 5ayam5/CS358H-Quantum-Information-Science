\begin{solution}[label=ques:1]
  \begin{question}
    Work out an explicit circuit of Toffoli gates for adding two 2-bit integers to get a 3-bit integer --- assume the integers are unsigned, encoded in binary in the usual, simplest way. You can use arbitrary ancilla bits initialized to 0 or 1. Be sure to designate your input, output, and garbage registers. 

\noindent Show the garbage bits that are generated by your circuit when 11 is added to 10.
  \end{question}
  \tcblower{}
  \begin{proof}
    The circuit that performs a full-adder for a 2-bit unsigned addition is:

    \begin{minipage}{\textwidth}
      \begin{quantikz}
        \lstick{$a_0$} & \ctrl{5} & \ctrl{6} & \slice{} &          &          & \slice{} &          & \slice{} & \\
        \lstick{$a_1$} &          &          &          & \ctrl{7} & \ctrl{6} &          &          &          & \\
        \lstick{$b_0$} & \ctrl{3} &          & \ctrl{4} &          &          &          &          &          & \\
        \lstick{$b_1$} &          &          &          & \ctrl{5} &          & \ctrl{4} &          &          & \\
        \lstick{$1$}   &          & \ctrl{2} & \ctrl{2} &          & \ctrl{3} & \ctrl{3} &          & \ctrl{3} & \\
        \lstick{$c_0$} & \targ{}  &          &          &          &          &          & \ctrl{3} & \ctrl{2} & \\
        \lstick{$s_0$} &          & \targ{}  & \targ{}  &          &          &          &          &          & \\
        \lstick{$s_1$} &          &          &          &          & \targ{}  & \targ{}  & \ctrl{1} & \targ{}  & \\
        \lstick{$s_2$} &          &          &          & \targ{}  &          &          & \targ{}  &          & 
      \end{quantikz}
    \end{minipage}

    We represent the two 2-bit inputs as $a_1a_0$ and $b_1b_0$ and the output as $s_2s_1s_0$. The circuit uses 8 Toffoli gates.\par
    To see why it works, note that the group of three Toffolis before the first slice, and the group of three Toffolis between the first and second slice perform the same function but on different input and output bits. The first Toffoli in the sequence computes the carry bit ($c_0, s_2$) and the next two Toffolis compute the xor of the input bits to get the sum ($s_0, s_2$). The two Toffolis before the last slice are used to incorporate the carry bit from the first addition into the sum bits $s_1, s_2$. We use two garbage bits $1, c_0$, for executing CNOTs and storing the carry, respectively.\par
    When $11$ is added to $10$, we have $a_1a_0 = 11$ and $b_1b_0 = 10$. The output of the circuit is $s_2s_1s_0 = 101$ and the garbage bits are $c_0 = 0$ and $1 = 1$.
  \end{proof}
\end{solution}
